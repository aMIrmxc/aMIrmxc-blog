---
title: "ุจุฑุฑุณ TypeORMุ ูุฏุฑุชููุฏุชุฑู ORM ุณูุช ุฏุฑ ุงฺฉูุณุณุชู Node.js"
description: "ุขุดูุง ุจุง TypeORM ู ูุงุจูุชโูุง ุขู ุจุฑุง ูุฏุฑุช ุฏุชุงุจุณ ุฏุฑ Node.jsุ ุงุฒ ููุงูู ูพุงู ุชุง ูพุงุฏูโุณุงุฒ ุนูู"
post_id: "typeorm-introduction"
publishDate: "10 Feb 2026"
tags: ["TypeORM", "ORM", "Node.js", "TypeScript", "Database", "SQL"]
---


#  TypeORMุ ูุฏุฑุชููุฏุชุฑู ORM ุณูุช ุฏุฑ ุงฺฉูุณุณุชู Node.js
 
 
 ![alt text](img.png)
 

ุณูุงู ู ุฎูุด ุงููุฏุฏ! ููู ุงูู ฺฉุงุฑ ุงูู ุจฺฏู ฺฉู ูุจู ุงุฒ ุงูฺฉู ูุงุฑุฏ ุฏูุง ORM ูุง ุจุดุฏ ุจุงุฏ ุขุดูุง ุงููู ุจุง sql ู ฺฉ ูุฑููุฑฺฉ ุจุฑูุงฺฉู ููุณ ุจฺฉ ุงูุฏ   (express.js) ุฏุงุดุชู ุจุงุดุฏ. ูุง ุชู ูพุณุช ูุง ูุจู ุขููุฒุด express.js ุฑู ูุฑุงุฑ ุฏุงุฏูู ู ูุฑุงุฑู  ุฏุฑ ุงูุฌุง  TypeORM  ุฑู ฺฉู ุงุณุชูุงุฏู ุงุฒุด ุฏุฑ express.js ุฎู ุฑุงุฌ ูุณุช ุฑู ุจุฑุณ  ฺฉูู. ุงูุจุชู ฺฉู ุงุฏฺฏุฑ TypeORM ุจุงุนุซ ูุดู ุจู ููุงูู ฺฉู ORM ูุง ูุณูุท ุจุดุฏ ู ุจุชููุฏ ุงุตูู  ุขููุง ุฑู ุฏุฑ ูุฑ ุฒุจุงู ุจุฑูุงูู ููุณ ุฏุฑฺฉ ฺฉูุฏ.

## ุงุตูุง ORM ฺูุ

ุนุจุงุฑุช ORM ูุฎูู Object-Relational Mapping ุงุณุช. ุจู ุฒุจุงู ุณุงุฏูุ ORM ูพู ุงุณุช ูุงู ุฏู ุฏูุง ูุชูุงูุช:
ฑ. ุฏูุง ฺฉุฏููุณ: ฺฉู ุฏุฑ ุขู ูุง ุจุง "ุดุก" ุง Object (ูุงููุฏ ฺฉูุงุณโูุง ุฏุฑ ุฌุงูุงุงุณฺฉุฑูพุช ุง ูพุงุชูู) ุณุฑ ู ฺฉุงุฑ ุฏุงุฑู.
ฒ. ุฏูุง ูพุงฺฏุงูโุฏุงุฏู: ฺฉู ุฏุฑ ุขู ุฏุงุฏูโูุง ุฏุฑ "ุฌุฏุงูู" (ูุงููุฏ SQL) ุฐุฎุฑู ูโุดููุฏ.

ุจุฏูู ORMุ ุดูุง ูุฌุจูุฑุฏ ฺฉุฏูุง ุทููุงู ู ูพฺุฏู SQL ุฑุง ูุงุจูุง ฺฉุฏูุง ุจุฑูุงููโููุณ ุฎูุฏ ุจููุณุฏ. ุงูุง ุจุง ORMุ ูพุงฺฏุงูโุฏุงุฏู ุฑุง ุฏููุงู ุดุจู ุจู ฺฉุฏูุง ูุนููู ุฒุจุงู ุฎูุฏุชุงู ูุฏุฑุช ูโฺฉูุฏ.


**ุจุฑุง ุฏุฑฺฉ ุจูุชุฑุ ูุณุฑ ุชุนุงูู ุจุง ุฏุชุงุจุณ ุฑุง ุจู ุณู ุฏูุฑู ุชูุณู ูโฺฉูู:**
ฑ. ุฏูุฑุงู SQL ุฎุงูุต (ุฏูู ทฐ ุชุง นฐ ููุงุฏ)

ุฏุฑ ุงู ุฏูุฑุงูุ ุจุฑูุงููโููุณุงู ุจุงุฏ ุฏุณุชูุฑุงุช ูุชู SQL ุฑุง ูุณุชููุงู ุฏุฑ ฺฉุฏ ูุฑุงุฑ ูโุฏุงุฏูุฏ.
- ูุดฺฉู: ุงุญุชูุงู ุฎุทุง ุชุงูพ ุจุงูุง ุจูุฏุ ุงููุช ูพุงู ุฏุงุดุช (ุญููุงุช SQL Injection) ู ุชุบุฑ ฺฉ ุณุชูู ุฏุฑ ุฏุชุงุจุณ ุจุงุนุซ ูโุดุฏ ุตุฏูุง ุฎุท ฺฉุฏ ุฏุฑ ุจุฑูุงูู ุจู ูุดฺฉู ุจุฎูุฑูุฏ.

ฒ. ุธููุฑ ุงููู ORMูุง (ุงูุงู ุฏูู ฒฐฐฐ)
ุจุง ฺฏุณุชุฑุด ุจุฑูุงููโููุณ "ุดุกโฺฏุฑุง" (OOP)ุ ูุงุฒ ุจู ุงุจุฒุงุฑ ุจุฑุง ุชุจุฏู ุฎูุฏฺฉุงุฑ ุฌุฏุงูู ุจู ุงุดุงุก ุงุญุณุงุณ ุดุฏ.
- Hibernate (ฒฐฐฑ): ุจุฑุง ุฒุจุงู ุฌุงูุง ูุนุฑู ุดุฏ ู ุงูููุงุจ ุฏุฑ ุงู ูุณุฑ ุจูุฏ.
- ActiveRecord (ฒฐฐด): ุจุง ูุฑูโูุฑฺฉ Ruby on Rails ูุนุฑู ุดุฏ ู ููููู ุณุงุฏฺฏ ุฏุฑ ุชุนุงูู ุจุง ุฏุชุงุจุณ ุฑุง ุจู ุงูุฌ ุฑุณุงูุฏ.
- Entity Framework (ฒฐฐธ): ุชูุณุท ูุงฺฉุฑูุณุงูุช ุจุฑุง ุฏุงุชโูุช ูุนุฑู ุดุฏ.

ณ. ุฏูุฑุงู ูุฏุฑู ู ุชุงูพโุณู (ฒฐฑต ุชุง ฺฉููู)
ุฏุฑ ุณุงูโูุง ุงุฎุฑุ ุงุจุฒุงุฑูุง ููุดููุฏุชุฑ ุดุฏูโุงูุฏ. ORMูุง ูุฏุฑู ูุงููุฏ TypeORM ุง Drizzle ุจู ุฌุง ููุท ฺฉูพ ฺฉุฑุฏู ุงุทูุงุนุงุชุ ุจุฑ ุฑู "ุงููุช ููุนโูุง" (Type Safety) ุชูุฑฺฉุฒ ุฏุงุฑูุฏ ุชุง ุจุฑูุงููโููุณ ุญุช ูุจู ุงุฒ ุงุฌุฑุง ฺฉุฏุ ุจุฏุงูุฏ ฺฉู ุขุง ุฏุงุฏูโุง ฺฉู ุงุฒ ุฏุชุงุจุณ ูโฺฏุฑุฏ ุฏุฑุณุช ุงุณุช ุง ุฎุฑ.

**ฺุฑุง ุงุฒ ORM ุงุณุชูุงุฏู ูโฺฉููุ**
- ุณุฑุนุช ุชูุณุนู: ุจู ุฌุง ููุดุชู ต ุฎุท SQLุ ฺฉ ูุชุฏ ุณุงุฏู ูุฑุงุฎูุงู ูโฺฉูุฏ.
- ุงููุช: ORMูุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฒ ูููุฐ ูฺฉุฑูุง ุจู ุฏุชุงุจุณ ุฌููฺฏุฑ ูโฺฉููุฏ.
- ุงุณุชููุงู ุงุฒ ููุน ุฏุชุงุจุณ: ูโุชูุงูุฏ ุจุฏูู ุชุบุฑ ุฏุฑ ฺฉุฏูุง ุงุตูุ ูพุงฺฏุงูโุฏุงุฏู ุฎูุฏ ุฑุง ุงุฒ MySQL ุจู PostgreSQL ุชุบุฑ ุฏูุฏ.
- ูุฏุฑุช ุชุบุฑุงุช (Migrations): ูุณุฎู ุฒุฏู ุจุฑุง ุณุงุฎุชุงุฑ ุฏุชุงุจุณ ุฏุฑ Git ุฑุง ุงูฺฉุงู ูพุฐุฑ ูโฺฉููุฏ.


**ูุซุงู ููุงุณูโุง:**
**ุจุฏูู ORM (ุงุณุชูุงุฏู ุงุฒ  SQL ุฎุงู):**
ุจุงุฏ ุฏุณุช ฺฉูุฆุฑ ุจููุณุฏุ ูุฑุงูุจ ุงููุช ุจุงุดุฏ ู ุฎุฑูุฌ ุฑุง ุฎูุฏุชุงู ุชูุฒ ฺฉูุฏ.
```javascript
// ฺฉุฏ ุฎุงู ู ุณุฎุช
const sql = 'SELECT * FROM users WHERE email = ?';
db.execute(sql, ['ali@gmail.com'], (err, rows) => {
  const user = rows[0]; 
  console.log(user.name);
});
```

**ุจุง ORM (ูุซูุงู TypeORM):**
ุงูฺฏุงุฑ ุฏุงุฑุฏ ุจุง ุงุดุงุก (Objects) ู ฺฉูุงุณโูุง ุฌุงูุงุงุณฺฉุฑูพุช ฺฉุงุฑ ูโฺฉูุฏ.
```javascript
// ฺฉุฏ ุชูุฒ ู ุฎูุงูุง
const user = await userRepository.findOneBy({ 
  email: 'ali@gmail.com' 
});
console.log(user.name);
```

ููููู **ORM** ฺฉ ููููู ฺฉู ุฏุฑ ุฏูุง ุจุฑูุงููโููุณ ุงุณุช ู ุชูุฑุจุงู ุชูุงู ุฒุจุงูโูุง ุจุฑูุงููโููุณ ฺฉู ุจุฑุง Backend ุงุณุชูุงุฏู ูโุดููุฏุ ORMูุง ูุฎุตูุต ุฎูุฏุดุงู ุฑุง ุฏุงุฑูุฏ.

### ุขุดูุง ุจุง ORM ูุง ุฒุจุงู ูุง ูุฎุชูู ุจุฑูุงูู ููุณ
ุจุงุฏ ุจุจูู ุฏุฑ ุฒุจุงูโูุง ุจุฑูุงูู ููุณ ฺู ุฎุจุฑ ุงุณุช :
#### ฑ. ูพุงุชูู (Python) ๐
ุงฺฏุฑ ุฑูุฒ ุจุฎูุงูุฏ ุจุง ูพุงุชูู ฺฉุฏ ุจุฒูุฏ (ูุซูุงู ุจุง ูุฑูโูุฑฺฉ Django ุง Flask)ุ ORMูุง ูุนุฑูู ุขู ุนุจุงุฑุชูุฏ ุงุฒ:
*   **SQLAlchemy:** ูุฏุฑุชููุฏุชุฑู ู ูุนุฑููโุชุฑู ORM ูพุงุชูู (ุดุจู TypeORM ุฏุฑ node.js).
*   **Django ORM:** ุงฺฏุฑ ุจุง ูุฑูโูุฑฺฉ ุฌูฺฏู ฺฉุงุฑ ฺฉูุฏุ ุฎูุฏุด ฺฉ ORM ุฏุงุฎู ุฏุงุฑุฏ ฺฉู ุจุณุงุฑ ูุญุจูุจ ุงุณุช.

#### ฒ. ูพโุงฺโูพ (PHP) ๐
ุฏูุง PHP ูู ูพุฑ ุงุฒ ORM ุงุณุช:
*   **Eloquent:** ูุชุนูู ุจู ูุฑูโูุฑฺฉ Laravel (ุจุณุงุฑ ูุญุจูุจ ู ุดุจู Prisma ุฑุงุญุช ุงุณุช).
*   **Doctrine:** ูุชุนูู ุจู ูุฑูโูุฑฺฉ Symfony (ุจุณุงุฑ ุดุจู Hibernate ุฌุงูุง).

#### ณ. ุณโุดุงุฑูพ (#C) ู ุฏุงุชโูุช ๐ช
*   **Entity Framework (EF Core):** ูพุงุฏุดุงู ุฏูุง ูุงฺฉุฑูุณุงูุช. ุงู ฺฉ ุงุฒ ูพุดุฑูุชูโุชุฑู ORMูุง ุฌูุงู ุงุณุช ฺฉู Prisma ู TypeORM ุจุณุงุฑ ุงุฒ ุงุฏูโูุงุดุงู ุฑุง ุงุฒ ุขู ฺฏุฑูุชูโุงูุฏ.

#### ด. ุฌุงูุง (Java) โ
*   **Hibernate:** ูพุฏุฑุจุฒุฑฺฏ ุชูุงู ORMูุง! ุจุณุงุฑ ูุฏุฑุชููุฏ ุงูุง ูพฺุฏู.

#### ต. ฺฏู (Go) ๐น
*   **GORM:** ูุญุจูุจโุชุฑู ORM ุจุฑุง ุฒุจุงู Go.



### ฺุฑุง ูุฑ ุฒุจุงู ORM ูุฎุตูุต ุฎูุฏุด ุฑุง ุฏุงุฑุฏุ

ฺูู ูุฑ ุฒุจุงู ุณุงุฎุชุงุฑ ูุชูุงูุช ุฏุงุฑุฏ:
*   ุฏุฑ **ุฌุงูุง** ู **ุณโุดุงุฑูพ** ููู ฺุฒ ุจุฑ ุงุณุงุณ ยซฺฉูุงุณยป (Class) ุงุณุช.
*   ุฏุฑ **ุฌุงูุงุงุณฺฉุฑูพุช** ูุง ุจุง ยซุขุจุฌฺฉุชยป (Object) ู JSON ุณุฑูฺฉุงุฑ ุฏุงุฑู.
*   ุฏุฑ **Go** ูุง ยซุงุณุชุฑุงฺฉฺุฑยป (Struct) ุฏุงุฑู.

ORM ุจุงุฏ ุจู ุฒุจุงู ุฎูุฏ ุขู ูุญุท ููุดุชู ุดูุฏ ุชุง ุจุชูุงูุฏ ุฏุงุฏูโูุง ุฏุชุงุจุณ ุฑุง ุจู ุณุงุฎุชุงุฑ ุขู ุฒุจุงู (ูุซูุงู ุขุจุฌฺฉุช JS) ุชุจุฏู ฺฉูุฏ.



## ุจุฑุฑุณ TypeORMุ ูุฏุฑุชููุฏุชุฑู ORM ุณูุช ุฏุฑ ุงฺฉูุณุณุชู Node.js

TypeORM ฺฉ **ORM** ุจุงูุบ ู ูุฏุฑุชููุฏ ุงุณุช ฺฉู ุงุฒ ุงูฺฏููุง **Active Record** ู **Data Mapper** ูพุดุชุจุงู ูโฺฉูุฏ. ุจู ุฒุจุงู ุณุงุฏูุ ุดูุง ุฌุฏุงูู ุฏุชุงุจุณ ุฑุง ุจู ุตูุฑุช **ฺฉูุงุณโูุง ุฌุงูุงุงุณฺฉุฑูพุช/ุชุงูพโุงุณฺฉุฑูพุช** ุชุนุฑู ูโฺฉูุฏ ู ุจุง ุงุณุชูุงุฏู ุงุฒ Decoratorูุง ุจู ุขูโูุง ูฺฺฏ ูโุฏูุฏ. TypeORM ฺฉุฏูุง ุดูุง ุฑุง ุจู ฺฉูุฆุฑโูุง SQL ุชุจุฏู ูโฺฉูุฏ.

TypeORM ุฑูฺฉุฑุฏ ูุชูุงูุช ูุณุจุช ุจู ORM ูุง ูุงููุฏ Prisma ุฏุงุฑุฏ. ุฏุฑ ุญุงู ฺฉู Prisma ุจุฑ ุงุณุงุณ ฺฉ ูุงู `schema` ูุฑฺฉุฒ ฺฉุงุฑ ูโฺฉูุฏุ TypeORM ุจุฑ ุงุณุงุณ **Class**ูุง ู **Decorator**ูุง (ุฏุฑ TypeScript) ุนูู ูโฺฉูุฏ.

ุจุงุฏ ุงุฏฺฏุฑ ุฑุง ุฏุฑ **ถ ฺฏุงู ุญุงุช** ุดุฑูุน ฺฉูู. (ูพุดโูุฑุถ ูุง ุงุณุชูุงุฏู ุงุฒ **TypeScript** ุงุณุช ฺูู TypeORM ุจุง ุขู ุจุดุชุฑู ูุฏุฑุช ุฑุง ุฏุงุฑุฏ).

## ฺฏุงู ฑ: ูุตุจ ู ุฑุงูโุงูุฏุงุฒ ุงููู (Setup)

ุฏุฑ ูพุฑูฺู Express ุฎูุฏุ ุงุจุชุฏุง ุจุงุฏ ูพฺฉุฌโูุง ูุงุฒู ุฑุง ูุตุจ ฺฉูุฏ.

ฑ. **ูุตุจ ูพฺฉุฌโูุง:**
```bash
npm install typeorm reflect-metadata sqlite3 --save
npm install typescript ts-node @types/node --save-dev
```
*(ูฺฉุชู: ูุง ุฏุฑ ุงูุฌุง ุงุฒ `sqlite3` ุงุณุชูุงุฏู ฺฉุฑุฏูุ ุจุฑุง ูพุณุชฺฏุฑุณ ุจุงุฏ `pg` ุฑุง ูุตุจ ฺฉูุฏ).*

ฒ. **ูพฺฉุฑุจูุฏ TypeScript:**
ุฏุฑ ูุงู `tsconfig.json` ุญุชูุงู ุจุงุฏ ุฏู ฺฏุฒูู ุฒุฑ ูุนุงู ุจุงุดูุฏ ุชุง ุฏฺฉูุฑุชูุฑูุง ฺฉุงุฑ ฺฉููุฏ:
```json
"emitDecoratorMetadata": true,
"experimentalDecorators": true
```

ณ. **ุงุฌุงุฏ ูุงู ุฏุชุงุณูุฑุณ (Data Source):**
 TypeORM ุชูุธูุงุช ุฑุง ูุนูููุงู ุฏุฑ ูุงู ุจู ูุงู `data-source.ts` ูฺฏู ูโุฏุงุฑุฏ:

```typescript
// data-source.ts
import { DataSource } from "typeorm";

export const AppDataSource = new DataSource({
    type: "sqlite",
    database: "database.sqlite",
    synchronize: false, // ุฏุฑ ูพุฑูุฏุงฺฉุดู ุญุชูุง false ุจุงุดุฏ
    logging: true,
    entities: ["src/entity/*.ts"], // ุขุฏุฑุณ ูุฏูโูุง
    migrations: ["src/migration/*.ts"], // ุขุฏุฑุณ ูุงฺฏุฑุดูโูุง
    subscribers: [],
});
```

## ฺฏุงู ฒ: ูุฏูโุณุงุฒ ุฏุงุฏูโูุง (Modeling/Entities)

ุฏุฑ TypeORMุ ูุฑ ุฌุฏูู ฺฉ **ฺฉูุงุณ (Class)** ุงุณุช ฺฉู ุจู ุขู **Entity** ูโฺฏูู. ุจุงุฏ ฺฉ ูุงู ุฏุฑ ูุณุฑ `src/entity/User.ts` ุจุณุงุฒู.

```typescript
// src/entity/User.ts
import { Entity, PrimaryGeneratedColumn, Column, CreateDateColumn } from "typeorm";

@Entity() // ุงู ฺฉูุงุณ ฺฉ ุฌุฏูู ุฏุชุงุจุณ ุงุณุช
export class User {
    @PrimaryGeneratedColumn() // ฺฉูุฏ ุงุตู ู ุงูุฒุงุด ุฎูุฏฺฉุงุฑ
    id: number;

    @Column({ unique: true }) // ุจุงุฏ ฺฉุชุง ุจุงุดุฏ
    email: string;

    @Column({ nullable: true }) // ูโุชูุงูุฏ ูุงู ุจุงุดุฏ
    name: string;

    @CreateDateColumn() // ุฒูุงู ุณุงุฎุช ูพุดโูุฑุถ
    createdAt: Date;
}
```

**ููุงูู ฺฉูุฏ ุงู ุจุฎุด:**
*   `@Entity`: ฺฉูุงุณ ุฑุง ุจู ุฌุฏูู ุชุจุฏู ูโฺฉูุฏ.
*   `@PrimaryGeneratedColumn`: ูุนุงุฏู `id` ุฏุฑ ุฏุชุงุจุณ.
*   `@Column`: ุชุนุฑู ุณุชููโูุง ูุนููู.


## ฺฏุงู ณ: ูุฏุฑุช ุชุบุฑุงุช ุฏุชุงุจุณ (Migrations)

ุฏุฑ TypeORMุ ุจุฑุง ุงูฺฉู ุชุบุฑุงุช ฺฉูุงุณโูุง ุฎูุฏ (Entityูุง) ุฑุง ุจู ุฏุชุงุจุณ ููุชูู ฺฉูุฏุ ุงุฒ ุณุณุชู **ูุงฺฏุฑุดู (Migration)** ุงุณุชูุงุฏู ูโุดูุฏ. ุงู ุณุณุชู ุจู ุดูุง ฺฉูฺฉ ูโฺฉูุฏ ุชุง ุชุงุฑุฎฺูโุง ุงุฒ ุชุบุฑุงุช ุฏุชุงุจุณ ุฏุงุดุชู ุจุงุดุฏ ู ุจุชูุงูุฏ ุขู ุฑุง ุฏุฑ ูุญุทโูุง ูุฎุชูู (ุชูุณุนูุ ุชุณุชุ ูพุฑูุฏุงฺฉุดู) ููุงููฺฏ ูฺฏู ุฏุงุฑุฏ.

ุงุฒ ุขูุฌุง ฺฉู ุฏุณุชูุฑุงุช CLI ุฏุฑ TypeORM ุจุฑุง ูพุฑูฺูโูุง ุชุงูพโุงุณฺฉุฑูพุช ฺฉู ุทููุงู ูุณุชูุฏ (ฺูู ุงุฒ `ts-node` ุจุฑุง ุงุฌุฑุง ูุณุชูู ูุงูโูุง `ts` ุงุณุชูุงุฏู ูโฺฉููุฏ)ุ ูุฑุขูุฏ ุฑุง ุจู ุตูุฑุช ฺฏุงูโุจูโฺฏุงู ู ุฏูู ุจุฑุฑุณ ูโฺฉูู.

ฺุฑุฎู ูุงฺฏุฑุดู ุฏุฑ TypeORM ุดุงูู ุฏู ูุฑุญูู ุงุตู ุงุณุช: **ุชููุฏ ูุงู** ู **ุงุฌุฑุง ูุงู**.

#### ฑ. ุชููุฏ ูุงู ูุงฺฏุฑุดู (Generate)
ุงู ุฏุณุชูุฑ ูุฎุตูุต ูุญุท **ุชูุณุนู** ุงุณุช. ุฒูุงู ฺฉู ุดูุง ฺฉ Entity ุฑุง ุชุบุฑ ูโุฏูุฏ (ูุซูุงู ููุฏ ุงุถุงูู ูโฺฉูุฏ)ุ TypeORM ฺฉุฏ ุดูุง ุฑุง ุจุง ูุถุนุช ูุนู ุฏุชุงุจุณ ููุงุณู ูโฺฉูุฏ ู ฺฉ ูุงู ุญุงู ุฏุณุชูุฑุงุช SQL (ุจุฑุง ุงุนูุงู ู ุจุงุฒฺฏุฑุฏุงู ุชุบุฑุงุช) ูโุณุงุฒุฏ.

*   **ุฏุณุชูุฑ:**
    ```bash
    npx typeorm-ts-node-commonjs migration:generate -d ./data-source.ts ./src/migration/AddUserTable
    ```
*   **ุชุญูู ุฏุณุชูุฑ:**
    *   `-d ./data-source.ts`: ูุณุฑ ูุงู ุชูุธูุงุช ุฏุชุงุณูุฑุณ ุฑุง ูุดุฎุต ูโฺฉูุฏ.
    *   `./src/migration/AddUserTable`: ูุณุฑ ฺฉู ูุงู ูุงฺฏุฑุดู ุฏุฑ ุขู ุฐุฎุฑู ูโุดูุฏ ุจู ููุฑุงู ูุงู ุขู (ุฏุฑ ุงูุฌุง `AddUserTable`).

#### ฒ. ุงุฌุฑุง ูุงฺฏุฑุดูโูุง (Run)
ูพุณ ุงุฒ ุงูฺฉู ูุงู ูุงฺฏุฑุดู ุณุงุฎุชู ุดุฏุ ุจุงุฏ ุขู ุฑุง ุฑู ุฏุชุงุจุณ ุงุนูุงู ฺฉูุฏ ุชุง ุฌุฏุงูู ู ุณุชููโูุง ุณุงุฎุชู ุดููุฏ. ุงู ุฏุณุชูุฑ ูู ุฏุฑ ูุญุท **ุชูุณุนู** ู ูู ุฏุฑ **ุณุฑูุฑ (Production)** ุงุณุชูุงุฏู ูโุดูุฏ.

*   **ุฏุณุชูุฑ:**
    ```bash
    npx typeorm-ts-node-commonjs migration:run -d ./data-source.ts
    ```
*   **ูฺฉุชู ููู:** ุฏุฑ ูุญุท ูพุฑูุฏุงฺฉุดูุ ุดูุง ููุท ุงู ุฏุณุชูุฑ ุฑุง ุงุฌุฑุง ูโฺฉูุฏ ุชุง ุฏุชุงุจุณ ุณุฑูุฑ ุจุง ุขุฎุฑู ุชุบุฑุงุช ฺฉุฏุชุงู ููุงููฺฏ ุดูุฏ (ุฏุฑ ุณุฑูุฑ ูุจุงุฏ ุฏุณุชูุฑ `generate` ุฑุง ุงุฌุฑุง ฺฉุฑุฏ).

#### ณ. ุจุฑุฑุณ ูุถุนุช (Show)
ุงฺฏุฑ ูโุฎูุงูุฏ ุจุฏุงูุฏ ฺฉุฏุงู ูุงฺฏุฑุดูโูุง ุชุงฺฉููู ุฑู ุฏุชุงุจุณ ุงุนูุงู ุดุฏูโุงูุฏ ู ฺฉุฏุงูโฺฉ ุฏุฑ ุงูุชุธุงุฑ ุงุฌุฑุง ูุณุชูุฏุ ุงุฒ ุงู ุฏุณุชูุฑ ุงุณุชูุงุฏู ฺฉูุฏ. ุงู ุงุจุฒุงุฑ ุจุฑุง ุฏุจุงฺฏ ฺฉุฑุฏู ุจุณุงุฑ ููุฏ ุงุณุช.

*   **ุฏุณุชูุฑ:**
    ```bash
    npx typeorm-ts-node-commonjs migration:show -d ./data-source.ts
    ```

#### ด. ูพุงฺฉุณุงุฒ ฺฉุงูู ุฏุชุงุจุณ (Schema Drop)
ุงฺฏุฑ ุฏุฑ ูุญุท ุชูุณุนู ุฏุชุงุจุณ ุดูุง ุฏฺุงุฑ ูุดฺฉู ุดุฏู ู ูโุฎูุงูุฏ ููู ฺุฒ ุฑุง ูพุงฺฉ ฺฉูุฏ ู ุงุฒ ูู ุจุณุงุฒุฏุ ุงุฒ ุงู ุฏุณุชูุฑ ุงุณุชูุงุฏู ูโุดูุฏ.

*   **ุฏุณุชูุฑ:**
    ```bash
    npx typeorm-ts-node-commonjs schema:drop -d ./data-source.ts
    ```
*   **ูุดุฏุงุฑ:** ุงู ุฏุณุชูุฑ ุชูุงู ุฌุฏุงูู ู ุฏุงุฏูโูุง ุฏุชุงุจุณ ุฑุง ุญุฐู ูโฺฉูุฏ. ูพุณ ุงุฒ ุงุฌุฑุงุ ุจุงุฏ ุฏูุจุงุฑู ุฏุณุชูุฑ `migration:run` ุฑุง ุจุฒูุฏ ุชุง ุฌุฏุงูู ุงุฒ ูู ุณุงุฎุชู ุดููุฏ.



### ูฺฉุชู ุญุฑููโุง: ุณุงุฏูโุณุงุฒ ุฏุณุชูุฑุงุช ุจุง `package.json`

ููุงูุทูุฑ ฺฉู ูุดุงูุฏู ฺฉุฑุฏุฏุ ุชุงูพ ฺฉุฑุฏู `npx typeorm-ts-node-commonjs ...` ุจุณุงุฑ ุฒูุงูโุจุฑ ุงุณุช. ุงุณุชุงูุฏุงุฑุฏ ูพุฑูฺูโูุง TypeORM ุงู ุงุณุช ฺฉู ุงู ุฏุณุชูุฑุงุช ุฑุง ุฏุฑ ุจุฎุด `scripts` ูุงู `package.json` ุชุนุฑู ฺฉูุฏ:

```json
"scripts": {
    "typeorm": "typeorm-ts-node-commonjs",
    "migration:generate": "npm run typeorm migration:generate -d ./data-source.ts",
    "migration:run": "npm run typeorm migration:run -d ./data-source.ts",
    "migration:revert": "npm run typeorm migration:revert -d ./data-source.ts",
    "db:reset": "npm run typeorm schema:drop -d ./data-source.ts && npm run migration:run"
}
```

ุญุงูุง ูโุชูุงูุฏ ุจู ุณุงุฏฺฏ ุงุฒ ุฏุณุชูุฑุงุช ฺฉูุชุงู ุฒุฑ ุงุณุชูุงุฏู ฺฉูุฏ:
*   `npm run migration:generate -- ./src/migration/NewChange`
*   `npm run migration:run`

---

### ุฎูุงุตู ฺฉุงุฑุจุฑุฏ ุฏุณุชูุฑุงุช TypeORM CLI:

| ุฏุณุชูุฑ (Function) | ูุญุท ุงุณุชูุงุฏู | ฺฉุงุฑฺฉุฑุฏ ุงุตู | ุขุง ูุงู ูโุณุงุฒุฏุ |
| :--- | :--- | :--- | :--- |
| **`migration:generate`** | ููฺฉุงู (Dev) | ููุงุณู Entity ุจุง ุฏุชุงุจุณ ู ุณุงุฎุช ฺฉุฏ SQL | โ ุจูู |
| **`migration:run`** | ููฺฉุงู ู ุณุฑูุฑ | ุงุฌุฑุง ูุงูโูุง ูุงฺฏุฑุดู ุฑู ุฏุชุงุจุณ | โ ุฎุฑ |
| **`schema:drop`** | ููฺฉุงู (Dev) | ุญุฐู ฺฉุงูู ุชูุงู ุฌุฏุงูู ุฏุชุงุจุณ | โ ุฎุฑ |
| **`migration:show`** | ููู ุฌุง | ููุงุด ูุณุช ูุงฺฏุฑุดูโูุง ุงุนูุงู ุดุฏู | โ ุฎุฑ |
| **`migration:revert`** | ููู ุฌุง | ุจุฑฺฏุดุช ุฏุงุฏู ุขุฎุฑู ุชุบุฑ (Undo) | โ ุฎุฑ |


## ฺฏุงู ด: ุนููุงุช CRUD (ุญุงุชโุชุฑู ุจุฎุด)

ุจุฑุง ฺฉุงุฑ ุจุง ุฏุชุงุจุณุ ูุง ุงุฒ **Repository** ุงุณุชูุงุฏู ูโฺฉูู. ุงุจุชุฏุง ุจุงุฏ ุฏุชุงุณูุฑุณ ุฑุง Initialize ฺฉูู (ูุนูููุง ุฏุฑ ูุงู ุงุตู ุจุฑูุงูู).

```typescript
// index.ts
import { AppDataSource } from "./data-source";
import { User } from "./src/entity/User";

AppDataSource.initialize().then(async () => {
    
    // ุฏุฑุงูุช ุฑูพุงุฒุชูุฑ ูุฑุจูุท ุจู User
    const userRepository = AppDataSource.getRepository(User);

    // ฑ. ุงุฌุงุฏ ุฏุงุฏู (Create)
    const user = userRepository.create({
        email: "ali@example.com",
        name: "Ali"
    });
    await userRepository.save(user); // ุฐุฎุฑู ููุง ุฏุฑ ุฏุชุงุจุณ
    console.log("User created:", user);

    // ฒ. ุฎูุงูุฏู ุฏุงุฏู (Read)
    const allUsers = await userRepository.find();
    
    const oneUser = await userRepository.findOneBy({
        email: "ali@example.com"
    });

    // ณ. ุขูพุฏุช ุฏุงุฏู (Update)
    // ุฑูุด ุงูู: ูุงฺฉุด ู ุฐุฎุฑู (ูพุดููุงุฏ ุดุฏู)
    if (oneUser) {
        oneUser.name = "Ali Reza";
        await userRepository.save(oneUser);
    }
    // ุฑูุด ุฏูู: ุขูพุฏุช ูุณุชูู
    await userRepository.update({ email: "ali@example.com" }, { name: "Ali Reza" });

    // ด. ุญุฐู ุฏุงุฏู (Delete)
    await userRepository.delete({ email: "ali@example.com" });

}).catch(error => console.log(error));
```

## ฺฏุงู ต: ุฑูุงุจุท ุจู ุฌุฏุงูู (Relations) - ุจุณุงุฑ ููู

ูุฑุถ ฺฉูุฏ ูโุฎูุงูู ุฑุงุจุทู `User` ู `Post` (ฺฉ ุจู ฺูุฏ) ุฑุง ุงุฌุงุฏ ฺฉูู. ุงูุฌุง ุจุงุฏ ุฏุฑ ูุฑ ุฏู ฺฉูุงุณ ุชุบุฑ ุงุฌุงุฏ ฺฉูุฏ.

**ฑ. ุขูพุฏุช ูุฏู User:**
```typescript
// src/entity/User.ts
import { OneToMany, ... } from "typeorm";
import { Post } from "./Post";

@Entity()
export class User {
    // ... ุณุงุฑ ููุฏูุง

    @OneToMany(() => Post, (post) => post.author)
    posts: Post[];
}
```

**ฒ. ุณุงุฎุช ูุฏู Post:**
```typescript
// src/entity/Post.ts
import { Entity, PrimaryGeneratedColumn, Column, ManyToOne } from "typeorm";
import { User } from "./User";

@Entity()
export class Post {
    @PrimaryGeneratedColumn()
    id: number;

    @Column()
    title: string;

    @ManyToOne(() => User, (user) => user.posts)
    author: User;
}
```

ุจุนุฏ ุงุฒ ุชุบุฑุงุชุ ุจุงุฏ ุฏุณุชูุฑ `migration:generate` ู ุณูพุณ `migration:run` ุฑุง ุงุฌุฑุง ฺฉูุฏ.

**ูุญูู ุงุณุชูุงุฏู ุงุฒ ุฑูุงุจุท (Relational Queries):**

ุณุงุฎุช ฺฉุงุฑุจุฑ ููุฑุงู ุจุง ูพุณุช (Cascade Insert):
*(ูฺฉุชู: ุจุฑุง ุงูฺฉู ุงู ฺฉุงุฑ ฺฉูุฏุ ุจุงุฏ ุฏุฑ ุฏฺฉูุฑุชูุฑ OneToMany ฺฏุฒูู `{ cascade: true }` ุฑุง ุงุถุงูู ฺฉูุฏ)*

```typescript
const user = new User();
user.email = "sara@test.com";
const post = new Post();
post.title = "Hello TypeORM";
user.posts = [post]; // ุงุชุตุงู ุขุจุฌฺฉุชโูุง

await userRepository.save(user); // ูู ฺฉุงุฑุจุฑ ู ูู ูพุณุช ุฐุฎุฑู ูโุดููุฏ
```

ฺฏุฑูุชู ฺฉุงุฑุจุฑ **ุจู ููุฑุงู** ูพุณุชโูุงุด:

```typescript
const users = await userRepository.find({
    relations: {
        posts: true, // ุงู ูุนุงุฏู JOIN ุงุณุช
    },
});
```

## ฺฏุงู ถ: ุชุฑฺฉุจ ุจุง Express.js

ฺฉ ูุซุงู ฺฉุงูู ุงุฒ ุฑุงู ุงูุฏุงุฒ ุณุฑูุฑ:

```typescript
import express from "express";
import { AppDataSource } from "./data-source";
import { User } from "./src/entity/User";

const app = express();
app.use(express.json());

// ุงุชุตุงู ุจู ุฏุชุงุจุณ ูุจู ุงุฒ ุจุงูุง ุขูุฏู ุณุฑูุฑ
AppDataSource.initialize().then(() => {
    
    const userRepo = AppDataSource.getRepository(User);

    // ุฑูุช ุจุฑุง ฺฏุฑูุชู ููู ฺฉุงุฑุจุฑุงู
    app.get("/users", async (req, res) => {
        const users = await userRepo.find({ relations: { posts: true } });
        res.json(users);
    });

    // ุฑูุช ุจุฑุง ุซุจุช ูุงู
    app.post("/signup", async (req, res) => {
        const { email, name } = req.body;
        try {
            // ุงุฌุงุฏ ููููู ฺฉูุงุณ
            const newUser = userRepo.create({ email, name });
            // ุฐุฎุฑู ุฏุฑ ุฏุชุงุจุณ
            const result = await userRepo.save(newUser);
            res.json(result);
        } catch (error) {
            res.status(400).json({ error: "Error creating user" });
        }
    });

    app.listen(3000, () => console.log("Server running on port 3000"));

}).catch(error => console.log("TypeORM connection error: ", error));
```



## ุณุฎู ุขุฎุฑ
ููู ุงูฺู ูุงุฒ ุจูุฏ ุฏุฑ ููุฑุฏ TypeORM  ฺฉู ุงุฒ ุจูุชุฑู ู ูุญุจูุจ ุชุฑู ูุง ุฏุฑ ุงฺฉูุณุณุชู ุฌุงูุงุงุณฺฉุฑูพุช ูุณุช ุฑู ุจุฏููุฏ ฺฉุงููุง ุจูุด ุงุดุงุฑู ฺฉุฑุฏู. ุญุงูุง ููุจุช ุดูุงุณุช ฺฉู ูุธุฑุชูู ุฑู ุจุฑุงู ุจููุณุฏ. ๐

