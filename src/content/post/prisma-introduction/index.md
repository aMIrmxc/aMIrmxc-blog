---
title: "ุจุฑุฑุณ Prismaุ ูุญุจูุจโุชุฑู ORM ุฏุฑ ุงฺฉูุณุณุชู Node.js"
description: "ุขุดูุง ุจุง Prisma ู ูุญููโ ุงุชุตุงูุ ูุฏูโุณุงุฒ ู ฺฉูุฆุฑโุฒู ุงูู ุฏุฑ ูพุงฺฏุงูโูุง ุฏุงุฏูโ SQLโ ุจุง ุงุณุชูุงุฏู ุงุฒ TypeScript"
post_id: "prisma-introduction"
publishDate: "14 Feb 2026"
tags: ["Prisma", "ORM", "Node", "TypeScript", "PostgreSQL", "MySQL", "SQL"]
---

# ุจุฑุณ prisma ; ูุญุจูุจ ุชุฑู ORM ุฏุฑ ุงฺฉูุณุณุชู node.js

![alt text](img.png)


ุณูุงู ู ุฎูุด ุงููุฏุฏ! ููู ุงูู ฺฉุงุฑ ุงูู ุจฺฏู ฺฉู ูุจู ุงุฒ ุงูฺฉู ูุงุฑุฏ ุฏูุง ORM ูุง ุจุดุฏ ุจุงุฏ ุขุดูุง ุงููู ุจุง sql ู ฺฉ ูุฑููุฑฺฉ ุจุฑูุงฺฉู ููุณ ุจฺฉ ุงูุฏ (express.js) ุฏุงุดุชู ุจุงุดุฏ. ูุง ุชู ูพุณุช ูุง ูุจู ุขููุฒุด express.js ุฑู ูุฑุงุฑ ุฏุงุฏูู ู ูุฑุงุฑู ุฏุฑ ุงูุฌุง prisma ORM ุฑู ฺฉู ุงุณุชูุงุฏู ุงุฒุด ุฏุฑ express.js ุฎู ุฑุงุฌ ูุณุช ุฑู ุจุฑุณ ฺฉูู. ุงูุจุชู ฺฉู ุงุฏฺฏุฑ prisma ุจุงุนุซ ูุดู ุจู ููุงูู ฺฉู ORM ูุง ูุณูุท ุจุดุฏ ู ุจุชููุฏ ุงุตูู ุขููุง ุฑู ุฏุฑ ูุฑ ุฒุจุงู ุจุฑูุงูู ููุณ ุฏุฑฺฉ ฺฉูุฏ.

## ุงุตูุง ORM ฺูุ

ุนุจุงุฑุช ORM ูุฎูู Object-Relational Mapping ุงุณุช. ุจู ุฒุจุงู ุณุงุฏูุ ORM ูพู ุงุณุช ูุงู ุฏู ุฏูุง ูุชูุงูุช:
ฑ. ุฏูุง ฺฉุฏููุณ: ฺฉู ุฏุฑ ุขู ูุง ุจุง "ุดุก" ุง Object (ูุงููุฏ ฺฉูุงุณโูุง ุฏุฑ ุฌุงูุงุงุณฺฉุฑูพุช ุง ูพุงุชูู) ุณุฑ ู ฺฉุงุฑ ุฏุงุฑู.
ฒ. ุฏูุง ูพุงฺฏุงูโุฏุงุฏู: ฺฉู ุฏุฑ ุขู ุฏุงุฏูโูุง ุฏุฑ "ุฌุฏุงูู" (ูุงููุฏ SQL) ุฐุฎุฑู ูโุดููุฏ.

ุจุฏูู ORMุ ุดูุง ูุฌุจูุฑุฏ ฺฉุฏูุง ุทููุงู ู ูพฺุฏู SQL ุฑุง ูุงุจูุง ฺฉุฏูุง ุจุฑูุงููโููุณ ุฎูุฏ ุจููุณุฏ. ุงูุง ุจุง ORMุ ูพุงฺฏุงูโุฏุงุฏู ุฑุง ุฏููุงู ุดุจู ุจู ฺฉุฏูุง ูุนููู ุฒุจุงู ุฎูุฏุชุงู ูุฏุฑุช ูโฺฉูุฏ.

**ุจุฑุง ุฏุฑฺฉ ุจูุชุฑุ ูุณุฑ ุชุนุงูู ุจุง ุฏุชุงุจุณ ุฑุง ุจู ุณู ุฏูุฑู ุชูุณู ูโฺฉูู:**
ฑ. ุฏูุฑุงู SQL ุฎุงูุต (ุฏูู ทฐ ุชุง นฐ ููุงุฏ)

ุฏุฑ ุงู ุฏูุฑุงูุ ุจุฑูุงููโููุณุงู ุจุงุฏ ุฏุณุชูุฑุงุช ูุชู SQL ุฑุง ูุณุชููุงู ุฏุฑ ฺฉุฏ ูุฑุงุฑ ูโุฏุงุฏูุฏ.

- ูุดฺฉู: ุงุญุชูุงู ุฎุทุง ุชุงูพ ุจุงูุง ุจูุฏุ ุงููุช ูพุงู ุฏุงุดุช (ุญููุงุช SQL Injection) ู ุชุบุฑ ฺฉ ุณุชูู ุฏุฑ ุฏุชุงุจุณ ุจุงุนุซ ูโุดุฏ ุตุฏูุง ุฎุท ฺฉุฏ ุฏุฑ ุจุฑูุงูู ุจู ูุดฺฉู ุจุฎูุฑูุฏ.

ฒ. ุธููุฑ ุงููู ORMูุง (ุงูุงู ุฏูู ฒฐฐฐ)
ุจุง ฺฏุณุชุฑุด ุจุฑูุงููโููุณ "ุดุกโฺฏุฑุง" (OOP)ุ ูุงุฒ ุจู ุงุจุฒุงุฑ ุจุฑุง ุชุจุฏู ุฎูุฏฺฉุงุฑ ุฌุฏุงูู ุจู ุงุดุงุก ุงุญุณุงุณ ุดุฏ.

- Hibernate (ฒฐฐฑ): ุจุฑุง ุฒุจุงู ุฌุงูุง ูุนุฑู ุดุฏ ู ุงูููุงุจ ุฏุฑ ุงู ูุณุฑ ุจูุฏ.
- ActiveRecord (ฒฐฐด): ุจุง ูุฑูโูุฑฺฉ Ruby on Rails ูุนุฑู ุดุฏ ู ููููู ุณุงุฏฺฏ ุฏุฑ ุชุนุงูู ุจุง ุฏุชุงุจุณ ุฑุง ุจู ุงูุฌ ุฑุณุงูุฏ.
- Entity Framework (ฒฐฐธ): ุชูุณุท ูุงฺฉุฑูุณุงูุช ุจุฑุง ุฏุงุชโูุช ูุนุฑู ุดุฏ.

ณ. ุฏูุฑุงู ูุฏุฑู ู ุชุงูพโุณู (ฒฐฑต ุชุง ฺฉููู)
ุฏุฑ ุณุงูโูุง ุงุฎุฑุ ุงุจุฒุงุฑูุง ููุดููุฏุชุฑ ุดุฏูโุงูุฏ. ORMูุง ูุฏุฑู ูุงููุฏ Prisma ุง Drizzle ุจู ุฌุง ููุท ฺฉูพ ฺฉุฑุฏู ุงุทูุงุนุงุชุ ุจุฑ ุฑู "ุงููุช ููุนโูุง" (Type Safety) ุชูุฑฺฉุฒ ุฏุงุฑูุฏ ุชุง ุจุฑูุงููโููุณ ุญุช ูุจู ุงุฒ ุงุฌุฑุง ฺฉุฏุ ุจุฏุงูุฏ ฺฉู ุขุง ุฏุงุฏูโุง ฺฉู ุงุฒ ุฏุชุงุจุณ ูโฺฏุฑุฏ ุฏุฑุณุช ุงุณุช ุง ุฎุฑ.

**ฺุฑุง ุงุฒ ORM ุงุณุชูุงุฏู ูโฺฉููุ**

- ุณุฑุนุช ุชูุณุนู: ุจู ุฌุง ููุดุชู ต ุฎุท SQLุ ฺฉ ูุชุฏ ุณุงุฏู ูุฑุงุฎูุงู ูโฺฉูุฏ.
- ุงููุช: ORMูุง ุจู ุตูุฑุช ุฎูุฏฺฉุงุฑ ุงุฒ ูููุฐ ูฺฉุฑูุง ุจู ุฏุชุงุจุณ ุฌููฺฏุฑ ูโฺฉููุฏ.
- ุงุณุชููุงู ุงุฒ ููุน ุฏุชุงุจุณ: ูโุชูุงูุฏ ุจุฏูู ุชุบุฑ ุฏุฑ ฺฉุฏูุง ุงุตูุ ูพุงฺฏุงูโุฏุงุฏู ุฎูุฏ ุฑุง ุงุฒ MySQL ุจู PostgreSQL ุชุบุฑ ุฏูุฏ.
- ูุฏุฑุช ุชุบุฑุงุช (Migrations): ูุณุฎู ุฒุฏู ุจุฑุง ุณุงุฎุชุงุฑ ุฏุชุงุจุณ ุฏุฑ Git ุฑุง ุงูฺฉุงู ูพุฐุฑ ูโฺฉููุฏ.

**ูุซุงู ููุงุณูโุง:**
**ุจุฏูู ORM (ุงุณุชูุงุฏู ุงุฒ SQL ุฎุงู):**
ุจุงุฏ ุฏุณุช ฺฉูุฆุฑ ุจููุณุฏุ ูุฑุงูุจ ุงููุช ุจุงุดุฏ ู ุฎุฑูุฌ ุฑุง ุฎูุฏุชุงู ุชูุฒ ฺฉูุฏ.

```javascript
// ฺฉุฏ ุฎุงู ู ุณุฎุช
const sql = "SELECT * FROM users WHERE email = ?";
db.execute(sql, ["ali@gmail.com"], (err, rows) => {
	const user = rows[0];
	console.log(user.name);
});
```

**ุจุง ORM (ูุซูุงู Prisma):**
ุงูฺฏุงุฑ ุฏุงุฑุฏ ุจุง ุขุฑุงูโูุง ุฌุงูุงุงุณฺฉุฑูพุช ฺฉุงุฑ ูโฺฉูุฏ.

```javascript
// ฺฉุฏ ุชูุฒ ู ุฎูุงูุง
const user = await prisma.user.findUnique({
	where: { email: "ali@gmail.com" },
});
console.log(user.name);
```

ููููู **ORM** ฺฉ ููููู ฺฉู ุฏุฑ ุฏูุง ุจุฑูุงููโููุณ ุงุณุช ู ุชูุฑุจุงู ุชูุงู ุฒุจุงูโูุง ุจุฑูุงููโููุณ ฺฉู ุจุฑุง Backend ุงุณุชูุงุฏู ูโุดููุฏุ ORMูุง ูุฎุตูุต ุฎูุฏุดุงู ุฑุง ุฏุงุฑูุฏ.

### ุขุดูุง ุจุง ORM ูุง ุฒุจุงู ูุง ูุฎุชูู ุจุฑูุงูู ููุณ

ุจุงุฏ ุจุจูู ุฏุฑ ุฒุจุงูโูุง ุจุฑูุงูู ููุณ ฺู ุฎุจุฑ ุงุณุช :

#### ฑ. ูพุงุชูู (Python) ๐

ุงฺฏุฑ ุฑูุฒ ุจุฎูุงูุฏ ุจุง ูพุงุชูู ฺฉุฏ ุจุฒูุฏ (ูุซูุงู ุจุง ูุฑูโูุฑฺฉ Django ุง Flask)ุ ORMูุง ูุนุฑูู ุขู ุนุจุงุฑุชูุฏ ุงุฒ:

- **SQLAlchemy:** ูุฏุฑุชููุฏุชุฑู ู ูุนุฑููโุชุฑู ORM ูพุงุชูู (ุดุจู TypeORM ุฏุฑ node.js).
- **Django ORM:** ุงฺฏุฑ ุจุง ูุฑูโูุฑฺฉ ุฌูฺฏู ฺฉุงุฑ ฺฉูุฏุ ุฎูุฏุด ฺฉ ORM ุฏุงุฎู ุฏุงุฑุฏ ฺฉู ุจุณุงุฑ ูุญุจูุจ ุงุณุช.

#### ฒ. ูพโุงฺโูพ (PHP) ๐

ุฏูุง PHP ูู ูพุฑ ุงุฒ ORM ุงุณุช:

- **Eloquent:** ูุชุนูู ุจู ูุฑูโูุฑฺฉ Laravel (ุจุณุงุฑ ูุญุจูุจ ู ุดุจู Prisma ุฑุงุญุช ุงุณุช).
- **Doctrine:** ูุชุนูู ุจู ูุฑูโูุฑฺฉ Symfony (ุจุณุงุฑ ุดุจู Hibernate ุฌุงูุง).

#### ณ. ุณโุดุงุฑูพ (#C) ู ุฏุงุชโูุช ๐ช

- **Entity Framework (EF Core):** ูพุงุฏุดุงู ุฏูุง ูุงฺฉุฑูุณุงูุช. ุงู ฺฉ ุงุฒ ูพุดุฑูุชูโุชุฑู ORMูุง ุฌูุงู ุงุณุช ฺฉู Prisma ู TypeORM ุจุณุงุฑ ุงุฒ ุงุฏูโูุงุดุงู ุฑุง ุงุฒ ุขู ฺฏุฑูุชูโุงูุฏ.

#### ด. ุฌุงูุง (Java) โ

- **Hibernate:** ูพุฏุฑุจุฒุฑฺฏ ุชูุงู ORMูุง! ุจุณุงุฑ ูุฏุฑุชููุฏ ุงูุง ูพฺุฏู.

#### ต. ฺฏู (Go) ๐น

- **GORM:** ูุญุจูุจโุชุฑู ORM ุจุฑุง ุฒุจุงู Go.

### ฺุฑุง ูุฑ ุฒุจุงู ORM ูุฎุตูุต ุฎูุฏุด ุฑุง ุฏุงุฑุฏุ

ฺูู ูุฑ ุฒุจุงู ุณุงุฎุชุงุฑ ูุชูุงูุช ุฏุงุฑุฏ:

- ุฏุฑ **ุฌุงูุง** ู **ุณโุดุงุฑูพ** ููู ฺุฒ ุจุฑ ุงุณุงุณ ยซฺฉูุงุณยป (Class) ุงุณุช.
- ุฏุฑ **ุฌุงูุงุงุณฺฉุฑูพุช** ูุง ุจุง ยซุขุจุฌฺฉุชยป (Object) ู JSON ุณุฑูฺฉุงุฑ ุฏุงุฑู.
- ุฏุฑ **Go** ูุง ยซุงุณุชุฑุงฺฉฺุฑยป (Struct) ุฏุงุฑู.

ORM ุจุงุฏ ุจู ุฒุจุงู ุฎูุฏ ุขู ูุญุท ููุดุชู ุดูุฏ ุชุง ุจุชูุงูุฏ ุฏุงุฏูโูุง ุฏุชุงุจุณ ุฑุง ุจู ุณุงุฎุชุงุฑ ุขู ุฒุจุงู (ูุซูุงู ุขุจุฌฺฉุช JS) ุชุจุฏู ฺฉูุฏ.

## ุจุฑุณ prisma ; ูุญุจูุจ ุชุฑู ORM ุฏุฑ ุงฺฉูุณุณุชู node.js

Prisma ฺฉ **ORM (Object-Relational Mapper)** ูุณู ุฌุฏุฏ ุงุณุช. ุจู ุฒุจุงู ุณุงุฏูุ ุจู ุฌุง ููุดุชู ฺฉุฏูุง SQL ูพฺุฏู ู ุฎุดฺฉุ ุดูุง ุจุง ุขุจุฌฺฉุชโูุง ุฌุงูุงุงุณฺฉุฑูพุช (ุง ุชุงูพโุงุณฺฉุฑูพุช) ฺฉุงุฑ ูโฺฉูุฏ ู Prisma ุขูโูุง ุฑุง ุจู ฺฉูุฆุฑโูุง ุฏุชุงุจุณ ุชุจุฏู ูโฺฉูุฏ.

ุจุงุฏ ุงุฏฺฏุฑ ุฑุง ุฏุฑ **ถ ฺฏุงู ุญุงุช** ุดุฑูุน ฺฉูู.

## ฺฏุงู ฑ: ูุตุจ ู ุฑุงูโุงูุฏุงุฒ ุงููู (Setup)

ุฏุฑ ูพุฑูฺู Express ุฎูุฏุ ุงุจุชุฏุง ุจุงุฏ Prisma ุฑุง ูุตุจ ฺฉูุฏ.

ฑ. **ูุตุจ ูพฺฉุฌโูุง:**

```bash
npm install prisma --save-dev
npm install @prisma/client
```

ฒ. **ุงุฌุงุฏ ูุงูโูุง ุงููู:**
ุฏุณุชูุฑ ุฒุฑ ูพูุดูโ `prisma` ู ูุงู ูพฺฉุฑุจูุฏ ุฑุง ูโุณุงุฒุฏ:

```bash
npx prisma init
```

ุญุงูุง ุฏู ูุงู ููู ุฏุงุฑุฏ:

- `.env`: ุจุฑุง ูฺฏูุฏุงุฑ ุขุฏุฑุณ ุฏุชุงุจุณ (Connection String).
- `prisma/schema.prisma`: ููุจ ุชูพูุฏู Prisma. ุฌุง ฺฉู ุฌุฏุงูู (Modelูุง) ุฑุง ุชุนุฑู ูโฺฉูุฏ.

> **ูฺฉุชู:** ุฏุฑ ูุงู `.env`ุ ุขุฏุฑุณ ุฏุชุงุจุณ ุฎูุฏ (PostgreSQL, MySQL, MongoDB, ...) ุฑุง ูุงุฑุฏ ฺฉูุฏ. ุจุฑุง ุงุฏฺฏุฑ ูโุชูุงูุฏ ูุนูุงู ุงุฒ SQLite ุงุณุชูุงุฏู ฺฉูุฏ ฺฉู ูุงุฒ ุจู ูุตุจ ุณุฑูุฑ ุฏุชุงุจุณ ูุฏุงุฑุฏ (ุฏุฑ ูุงู `schema.prisma` ููุฏุงุฑ `provider` ุฑุง ุจู `sqlite` ุชุบุฑ ุฏูุฏ).

> **ูฺฉุชู:** ุงูุจุชู ฺฉู ุดูุง ูโุชูุงูุฏ ุจุฏูู ุงุณุชูุงุฏู ุงุฒ npx ุฏุณุชูุฑุงุช Prisma ุฑุง ุงุฌุฑุง ฺฉูุฏ. ( ุฏุฑ ุตูุฑุช ฺฉู ุขู ุฑุง ุจู ุตูุฑุช global ูุตุจ ฺฉุฑุฏู ุจุงุดุฏ) ุงูุง ุจูุชุฑู ุงุฒ npx ุงุณุชูุงุฏู ฺฉูุฏ ฺูู ุงฺฏุฑ ฺูุฏู ูพุฑูฺู ุจุง ูุณุฎูโูุง ูุชูุงูุช ูพุฑุฒูุง ุฏุงุดุชู ุจุงุดุฏุ ูุณุฎู ูุตุจ ุดุฏู ุฑู ุณุณุชู ููฺฉู ุงุณุช ุจุง ูุณุฎู ููุฑุฏ ูุงุฒ ูพุฑูฺู ุณุงุฒฺฏุงุฑ ูุจุงุดุฏ.

## ฺฏุงู ฒ: ูุฏูโุณุงุฒ ุฏุงุฏูโูุง (Modeling)

ุฏุฑ backendุ ููู ฺุฒ ุจุง ุชุนุฑู ุณุงุฎุชุงุฑ ุฏุงุฏู ุดุฑูุน ูโุดูุฏ. ุจุงุฏ ุฏุฑ ูุงู `prisma/schema.prisma` ฺฉ ูุฏู ุณุงุฏู ุจุฑุง **User** ุจุณุงุฒู.

```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite" // ุง "postgresql" ุง "mysql"
  url      = env("DATABASE_URL")
}

// ุชุนุฑู ูุฏู ฺฉุงุฑุจุฑ
model User {
  id        Int      @id @default(autoincrement()) // ฺฉูุฏ ุงุตู ู ุงูุฒุงุด ุฎูุฏฺฉุงุฑ
  email     String   @unique                       // ุจุงุฏ ฺฉุชุง ุจุงุดุฏ
  name      String?                                // ุนูุงูุช ุณูุงู ุนู ูโุชูุงูุฏ ูุงู ุจุงุดุฏ (Optional)
  createdAt DateTime @default(now())               // ุฒูุงู ุณุงุฎุช ูพุดโูุฑุถ
}
```

**ููุงูู ฺฉูุฏ ุงู ุจุฎุด:**

- `@id`: ูุดุงูโุฏููุฏู Primary Key.
- `@unique`: ุฌููฺฏุฑ ุงุฒ ุฏุงุฏูโูุง ุชฺฉุฑุงุฑ.
- `?`: ููุฏ ุงุฎุชุงุฑ (nullable).

## ฺฏุงู ณ: ูุงฺฏุฑุดู (Migrations)

ุญุงูุง ฺฉู ูุฏู ุฑุง ููุดุชูุ ุจุงุฏ ุฏุชุงุจุณ ูุงูุน ุฑุง ุจุง ุงู ูุฏู ููุงููฺฏ ฺฉูู. ุงู ฺฉุงุฑ ุจุง **Migration** ุงูุฌุงู ูโุดูุฏ.

ุฏุณุชูุฑ ุฒุฑ ุฑุง ุฏุฑ ุชุฑููุงู ุจุฒูุฏ:

```bash
npx prisma migrate dev --name init
```

**ุงู ุฏุณุชูุฑ ฺู ฺฉุงุฑ ูโฺฉูุฏุ**

1.  ฺฉ ูุงู SQL ูโุณุงุฒุฏ.
2.  ุฌุฏูู `User` ุฑุง ุฏุฑ ุฏุชุงุจุณ ุงุฌุงุฏ ูโฺฉูุฏ. (ุงุฌุฑุง ฺฉุฏ sql ุณุงุฎุชู ุดุฏู)
3.  ฺฉูุงูุช Prisma ุฑุง ุขูพุฏุช ูโฺฉูุฏ ุชุง ููุฏูุง ุฌุฏุฏ (`prisma.post.create`, `prisma.post.findMany` โฆ) ุฏุฑ ฺฉุฏุชุงู ุฑุง ุจุดูุงุณุฏ ู ุฏุฑุฏุณุชุฑุณ ุจุงุดูุฏ

ููฺูู ฺฉูููโ `dev` ฺฉ **sub-command** ุงุณุช ู ูุนูโุงุด ุงู ุงุณุช:

> ยซุงู ูุงฺฏุฑุดู ุฏุฑ ูุญุท ุชูุณุนู (development) ุงูุฌุงู ุดูุฏ.ยป

ุฏุฑ ุงุฏุงูู ุงููุงุน subcommand ูุง prisma migrate ุฑุง ุจุฑุณ ูฺฉูู:

#### ุงููุงุน subcommand ูุง prisma migrate

ฑ. `npx prisma migrate dev`
ุงู ูพุฑฺฉุงุฑุจุฑุฏุชุฑู ุฏุณุชูุฑ ุฏุฑ ูุญุท **ุชูุณุนู (Development)** ุงุณุช.

- **ฺฉุงุฑ ฺฉู ุงูุฌุงู ูโุฏูุฏ:**
  1.  ุชุบุฑุงุช ูุงู `schema.prisma` ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ.
  2.  ฺฉ ูุงู ูุงฺฏุฑุดู ุฌุฏุฏ (SQL) ุฏุฑ ูพูุดู `prisma/migrations` ูโุณุงุฒุฏ.
  3.  ุขู ูุงู SQL ุฑุง ุฑู ุฏุชุงุจุณ ุงุฌุฑุง ูโฺฉูุฏ.
  4.  ฺฉูุงูุช ูพุฑุฒูุง (`Prisma Client`) ุฑุง ุฏูุจุงุฑู ุฌูุฑุช ูโฺฉูุฏ (ูุซู `prisma generate`).
- **ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉููุ**
  - ุฒูุงู ฺฉู ุฏุฑ ุญุงู ฺฉุฏููุณ ูุณุชุฏ ู ููุฏ ุง ุฌุฏูู ุฑุง ุชุบุฑ ุฏุงุฏูโุงุฏ.
- **ุขูพุดู ููู:**
  - `--name`: ุจุฑุง ูุงูโฺฏุฐุงุฑ ูุงฺฏุฑุดู.
  - ูุซุงู: `npx prisma migrate dev --name add_user_model`

ฒ. `npx prisma migrate deploy`
ุงู ุฏุณุชูุฑ ูุฎุตูุต ูุญุทโูุง **CI/CDุ Staging ู Production** ุงุณุช.

- **ฺฉุงุฑ ฺฉู ุงูุฌุงู ูโุฏูุฏ:**
  1.  ูุงูโูุง ูุงฺฏุฑุดู ููุฌูุฏ ุฏุฑ ูพูุดู `prisma/migrations` ุฑุง ุจุฑุฑุณ ูโฺฉูุฏ.
  2.  ูุงฺฏุฑุดูโูุง ฺฉู ูููุฒ ุฑู ุฏุชุงุจุณ ุงุนูุงู ูุดุฏูโุงูุฏ ุฑุง ุงุฌุฑุง ูโฺฉูุฏ.
  3.  **ูฺฉุชู ููู:** ุงู ุฏุณุชูุฑ ูุงู ูุงฺฏุฑุดู ุฌุฏุฏ **ููโุณุงุฒุฏ** ู `schema.prisma` ุฑุง ูฺฏุงู ููโฺฉูุฏุ ููุท ูุงูโูุง SQL ุงุฒ ูุจู ุณุงุฎุชู ุดุฏู ุฑุง ุงุฌุฑุง ูโฺฉูุฏ.
- **ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉููุ**
  - ุฒูุงู ฺฉู ฺฉุฏ ุฑุง ุฑู ุณุฑูุฑ ุงุตู ุขูพููุฏ ฺฉุฑุฏูโุงุฏ ู ูโุฎูุงูุฏ ุฏุชุงุจุณ ุณุฑูุฑ ุฑุง ุขูพุฏุช ฺฉูุฏ.
  - **ูุดุฏุงุฑ:** ูุฑฺฏุฒ ุฏุฑ ุณุฑูุฑ ูพุฑูุฏุงฺฉุดู ุงุฒ `migrate dev` ุงุณุชูุงุฏู ูฺฉูุฏ ฺูู ููฺฉู ุงุณุช ุฏุชุงุจุณ ุฑุง ุฑุณุช ฺฉูุฏ.

ณ. `npx prisma migrate reset`
ฺฉ ุฏุณุชูุฑ ูุฎุฑุจ ู ูุฏุฑุชููุฏ ุจุฑุง ุดุฑูุน ุฏูุจุงุฑู.

- **ฺฉุงุฑ ฺฉู ุงูุฌุงู ูโุฏูุฏ:**
  1.  ุฏุชุงุจุณ ุฑุง ฺฉุงููุงู ูพุงฺฉ ูโฺฉูุฏ (Drop Database).
  2.  ฺฉ ุฏุชุงุจุณ ุฌุฏุฏ ูโุณุงุฒุฏ.
  3.  ุชูุงู ูุงฺฏุฑุดูโูุง ุฑุง ุงุฒ ุงุจุชุฏุง ุชุง ุงูุชูุง ุฏูุจุงุฑู ุงุฌุฑุง ูโฺฉูุฏ.
  4.  ุฏุฑ ูพุงุงูุ ุงุณฺฉุฑูพุช `seed` (ุฏุงุฏูโูุง ุงููู) ุฑุง ุงุฌุฑุง ูโฺฉูุฏ.
- **ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉููุ**
  - ุฒูุงู ฺฉู ุฏุฑ ูุญุท ุชูุณุนู ุฏุชุงุจุณโุชุงู ุจู ูู ุฑุฎุชู ุงุณุช ู ูโุฎูุงูุฏ ููู ฺุฒ ุฑุง ุงุฒ ูู ุจุณุงุฒุฏ.
  - **ูุดุฏุงุฑ:** ุชูุงู ุฏุงุฏูโูุง ุฏุชุงุจุณ ูพุงฺฉ ุฎูุงููุฏ ุดุฏ.

ด. `npx prisma migrate status`
ุจุฑุง ุจุฑุฑุณ ูุถุนุช ููุงููฺฏ.

- **ฺฉุงุฑ ฺฉู ุงูุฌุงู ูโุฏูุฏ:**
  - ุจุฑุฑุณ ูโฺฉูุฏ ฺฉู ุขุง ุฏุชุงุจุณ ุจุง ูุงูโูุง ูุงฺฏุฑุดู ููุงููฺฏ ุงุณุช ุง ุฎุฑ.
  - ูุดุงู ูโุฏูุฏ ฺูุฏ ูุงฺฏุฑุดู ุงุนูุงู ูุดุฏู ุจุงู ูุงูุฏู ุงุณุช.
- **ฺู ุฒูุงู ุงุณุชูุงุฏู ฺฉููุ**
  - ุฒูุงู ฺฉู ุดฺฉ ุฏุงุฑุฏ ุฏุชุงุจุณโุชุงู ุขูพุฏุช ุงุณุช ุง ุฎุฑ (ูุนูููุงู ุจุฑุง ุฏุจุงฺฏ ฺฉุฑุฏู).

### ุฎูุงุตู ฺฉุงุฑุจุฑุฏ:

| ุฏุณุชูุฑ        | ูุญุท ุงุณุชูุงุฏู      | ฺฉุงุฑฺฉุฑุฏ ุงุตู                     | ุขุง ูุงู ูโุณุงุฒุฏุ |
| :----------- | :---------------- | :------------------------------ | :---------------- |
| **`dev`**    | ููฺฉุงู (Local)     | ุณุงุฎุช ูุงฺฏุฑุดู + ุงุนูุงู ุฑู DB    | โ ุจูู            |
| **`deploy`** | ุณุฑูุฑ (Production) | ููุท ุงุนูุงู ูุงูโูุง ููุฌูุฏ ุฑู DB | โ ุฎุฑ            |
| **`reset`**  | ููฺฉุงู (Local)     | ูพุงฺฉ ฺฉุฑุฏู ฺฉู ุฏุชุงุจุณ ู ุณุงุฎุช ูุฌุฏุฏ | โ ุฎุฑ            |
| **`status`** | ููู ุฌุง            | ููุงุด ูุถุนุช ุณูฺฉ ุจูุฏู           | โ ุฎุฑ            |

## ฺฏุงู ด: ุนููุงุช CRUD (ุญุงุชโุชุฑู ุจุฎุด)

ุญุงูุง ุจุงุฏ ุจุจูู ฺุทูุฑ ูโุชูุงูู ุจุง ุฏุชุงุจุณ ุชุนุงูู ฺฉูู. ฺฉ ูุงู ูุซู `index.js` ุจุณุงุฒุฏ.

ุงุจุชุฏุง ุจุงุฏ ฺฉูุงูุช ุฑุง ุงููพูุฑุช ฺฉูุฏ:

```javascript
const { PrismaClient } = require("@prisma/client");
const prisma = new PrismaClient();
```

ุงูโูุง ูุชุฏูุง ูุณุชูุฏ ฺฉู ุฑู `prisma.modelName` ุตุฏุง ูโุฒูุฏ.
ุงูฺฏู ฺฉู ุงู ุงุณุช:
`prisma.[ุงุณู_ูุฏู].[ฺฉุงุฑ_ฺฉู_ูโุฎูุงูุฏ_ุจฺฉูุฏ]`

#### ฑ. ุงุฌุงุฏ ุฏุงุฏู (Create)

```javascript
async function main() {
	// ุณุงุฎุช ฺฉ ฺฉุงุฑุจุฑ
	const user = await prisma.user.create({
		data: {
			email: "ali@example.com",
			name: "Ali",
		},
	});
	console.log("User created:", user);
}
```

#### ฒ. ุฎูุงูุฏู ุฏุงุฏู (Read)

```javascript
// ฺฏุฑูุชู ููู ฺฉุงุฑุจุฑุงู
const allUsers = await prisma.user.findMany();

// ฺฏุฑูุชู ฺฉ ฺฉุงุฑุจุฑ ุฎุงุต ุจุง ุงูู
const oneUser = await prisma.user.findUnique({
	where: {
		email: "ali@example.com",
	},
});
```

#### ณ. ุขูพุฏุช ุฏุงุฏู (Update)

```javascript
const updatedUser = await prisma.user.update({
	where: { email: "ali@example.com" }, // ฺู ฺฉุณุ
	data: { name: "Ali Reza" }, // ฺู ุชุบุฑุ
});
```

#### ด. ุญุฐู ุฏุงุฏู (Delete)

```javascript
const deletedUser = await prisma.user.delete({
	where: { email: "ali@example.com" },
});
```

## ฺฏุงู ต: ุฑูุงุจุท ุจู ุฌุฏุงูู (Relations) - ุจุณุงุฑ ููู

ุฏุฑ ุฏูุง ูุงูุนุ ุฏุงุฏูโูุง ุจู ูู ูุตู ูุณุชูุฏ. ูุซูุงู ูุฑ `User` ฺูุฏู `Post` ุฏุงุฑุฏ (ุฑุงุจุทู ฺฉโุจูโฺูุฏ).

ูุงู `schema.prisma` ุฑุง ุขูพุฏุช ฺฉูุฏ:

```prisma
model User {
  id    Int    @id @default(autoincrement())
  email String @unique
  posts Post[] // ุฑุงุจุทู: ฺฉ ฺฉุงุฑุจุฑ ูุณุช ูพุณุชโูุง ุฑุง ุฏุงุฑุฏ
}

model Post {
  id        Int     @id @default(autoincrement())
  title     String
  content   String?
  published Boolean @default(false)
  authorId  Int     // ฺฉูุฏ ุฎุงุฑุฌ (Foreign Key)
  author    User    @relation(fields: [authorId], references: [id]) // ุงุชุตุงู ุจู User
}
```

ุจุนุฏ ุงุฒ ุชุบุฑ ุงุณฺฉูุงุ ุฏูุจุงุฑู ุฏุณุชูุฑ ูุงฺฏุฑุดู ุฑุง ุจุฒูุฏ:
`npx prisma migrate dev --name add_posts`

ููููุทูุฑ ฺฉู ูุจูุง ูู ุงุดุงุฑู ฺฉุฑุฏู ุงู ุฏุณุชูุฑ ุฏููุงู ุณู ฺฉุงุฑ ูพุดุช ุณุฑ ูู ุงูุฌุงู ูโุฏูุฏ:
ฑ. **ุชูุงูุชโูุง ุงุณฺฉูุง ุฑุง ฺฉุดู ูโฺฉูุฏ**  
 Prisma ุชุบุฑุงุช ฺฉู ุฏุฑ ูุงู `schema.prisma` ุฏุงุฏูโุงุฏ (ูุซูุงู ุงุถุงูู ุดุฏู ูุฏู `Post`) ุฑุง ุจุง ูุถุนุช ูุนู ุฏุชุงุจุณ ููุงุณู ูโฺฉูุฏ.
ฒ. **ฺฉ ูุงู SQL ูุงฺฏุฑุดู ูโุณุงุฒุฏ**  
 ฺฉ ูุงู SQL ุฏุฑ ูพูุดูโ `prisma/migrations/...` ุงุฌุงุฏ ูโฺฉูุฏ ฺฉู ุดุงูู ุฏุณุชูุฑุงุช ูุงุฒู ุจุฑุง ุงุฌุงุฏ ุฌุฏูู `Post`ุ ฺฉูุฏ ุฎุงุฑุฌ (`authorId`) ู ุงูุฏฺฉุณโูุง ูุฑุจูุทู ุงุณุช.  
 ููุฏุงุฑ `--name add_posts` ููุท ูุงู ุงู ูุงฺฏุฑุดู ุฑุง ูุดุฎุต ูโฺฉูุฏ ุชุง ุจุนุฏุงู ุจุชูุงูุฏ ุขู ุฑุง ูพุฏุง ฺฉูุฏ.
ณ. **ุฏุชุงุจุณ ุฑุง ุขูพุฏุช ู ฺฉูุงูุช ุฑุง ุจุงุฒููุณ ูโฺฉูุฏ**  
 ูุงู SQL ุฑุง ุฑู ุฏุชุงุจุณ ุงุฌุฑุง ูโฺฉูุฏ (ุฌุฏูู `Post` ุฑุง ูโุณุงุฒุฏ) ู ุณูพุณ `@prisma/client` ุฑุง regenerate ูโฺฉูุฏ ุชุง ูุชุฏูุง ุฌุฏุฏ (`prisma.post.create`, `prisma.post.findMany` โฆ) ุฏุฑ ฺฉุฏุชุงู ุฏุฑ ุฏุณุชุฑุณ ุจุงุดูุฏ.

**ูุญูู ุงุณุชูุงุฏู ุงุฒ ุฑูุงุจุท (Relational Queries):**

ุณุงุฎุช ฺฉุงุฑุจุฑ ููุฑุงู ุจุง ูพุณุช (Nested Write):

```javascript
const userWithPost = await prisma.user.create({
	data: {
		email: "sara@test.com",
		posts: {
			create: {
				title: "ุณูุงู ุฏูุง",
				content: "ุงููู ูพุณุช ูู ุจุง ูพุฑุณูุง",
			},
		},
	},
});
```

ฺฏุฑูุชู ฺฉุงุฑุจุฑ **ุจู ููุฑุงู** ูพุณุชโูุงุด (ุจุณุงุฑ ููู: `include`):

```javascript
const users = await prisma.user.findMany({
	include: {
		posts: true, // ุงู ุฏุณุชูุฑ ูุนุงุฏู JOIN ุฏุฑ SQL ุงุณุช
	},
});
// ุฎุฑูุฌ ุดุงูู ุงุทูุงุนุงุช ฺฉุงุฑุจุฑ ู ุขุฑุงูโุง ุงุฒ ูพุณุชโูุง ุงู ุฎูุงูุฏ ุจูุฏ
```

ุฏุงุฎู ูพุฑุงูุชุฒ ุชูุงุจุน ุจุงูุงุ ด ฺฉููู ฺฉูุฏ ูุฌูุฏ ุฏุงุฑุฏ ฺฉู ูุฏุงู ุชฺฉุฑุงุฑ ูโุดููุฏ. ุงฺฏุฑ ุงู ด ุชุง ุฑุง ุจูููุฏุ ฺฉุงุฑ ุชูุงู ุงุณุช:

1.  **`where`**: ููุงู `if` ุงุณุช. ุจุฑุง ููุชุฑ ฺฉุฑุฏู (ูพุฏุง ฺฉุฑุฏู ฺฉุ).
    - ูุซุงู: `where: { id: 5 }`
2.  **`data`**: ุงุทูุงุนุงุช ฺฉู ูโุฎูุงูู ุจูุฑุณุชู (ฺ ุจููุณูุ).
    - ููุท ุฏุฑ `create` ู `update` ุงุณุชูุงุฏู ูโุดูุฏ.
3.  **`select`**: ุงูุชุฎุงุจ ููุฏูุง ุฎุงุต ( ูุซูุง ุจุฑุง ุงูฺฉู ูพุณูุฑุฏ ฺฉุงุฑุจุฑ ุฑุง ุจุฑูฺฏุฑุฏุงูุฏ).
    - ูุซุงู: `select: { name: true, email: true }` (ููุท ูุงู ู ุงูู ุฑุง ุจุฏู).
4.  **`include`**: ุจุฑุง ุฌูู ฺฉุฑุฏู ุฌุฏุงูู (ุฑุงุจุทูโูุง).
    - ูุซุงู: `include: { posts: true }` (ูพุณุชโูุง ฺฉุงุฑุจุฑ ุฑุง ูู ููุฑุงูุด ุจุงุฑ).

## ฺฏุงู ถ: ุชุฑฺฉุจ ุจุง Express.js

ุงู ุชูุงู ฺุฒ ุงุณุช ฺฉู ุจุฑุง ุดุฑูุน ุฏุฑ ูพุฑูฺู Express ูุงุฒ ุฏุงุฑุฏ. ูุซุงู ฺฉ Route:

```javascript
const express = require("express");
const { PrismaClient } = require("@prisma/client");

const prisma = new PrismaClient();
const app = express();
app.use(express.json());

// ุฑูุช ุจุฑุง ฺฏุฑูุชู ููู ฺฉุงุฑุจุฑุงู
app.get("/users", async (req, res) => {
	try {
		const users = await prisma.user.findMany();
		res.json(users);
	} catch (error) {
		res.status(500).json({ error: "Something went wrong" });
	}
});

// ุฑูุช ุจุฑุง ุซุจุช ูุงู
app.post("/signup", async (req, res) => {
	const { email, name } = req.body;
	try {
		const newUser = await prisma.user.create({
			data: { email, name },
		});
		res.json(newUser);
	} catch (error) {
		// ูุฏุฑุช ุงุฑูุฑ ุชฺฉุฑุงุฑ ุจูุฏู ุงูู
		res.status(400).json({ error: "User already exists" });
	}
});

app.listen(3000, () => console.log("Server running on port 3000"));
```

**ุฏุฑูุงูุน:**

1.  **Schema**: ุชุนุฑู ูุฏูโูุง ุฏุฑ `schema.prisma`.
2.  **Migrate**: ุชุจุฏู ูุฏู ุจู ุฌุฏูู ุฏุชุงุจุณ (`npx prisma migrate dev`).
3.  **Client**: ุงุณุชูุงุฏู ุงุฒ ุชูุงุจุน `create`, `findMany`, `update`, `delete` ุฏุฑ ฺฉูุชุฑูุฑูุง Express.
4.  **Relations**: ุงุณุชูุงุฏู ุงุฒ `include` ุจุฑุง ุฌูู ฺฉุฑุฏู ุฌุฏุงูู.

## ุณุฎู ุขุฎุฑ

ููู ุงูฺู ูุงุฒ ุจูุฏ ุฏุฑ ููุฑุฏ prisma orm ฺฉู ุงุฒ ุจูุชุฑู ู ูุญุจูุจ ุชุฑู ูุง ุฏุฑ ุงฺฉูุณุณุชู ุฌุงูุงุงุณฺฉุฑูพุช ูุณุช ุฑู ุจุฏููุฏ ฺฉุงููุง ุจูุด ุงุดุงุฑู ฺฉุฑุฏู. ุญุงูุง ููุจุช ุดูุงุณุช ฺฉู ูุธุฑุชูู ุฑู ุจุฑุงู ุจููุณุฏ. ๐
